(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[378],{39874:function(e,t,n){"use strict";n.d(t,{LV:function(){return u},TG:function(){return p},b9:function(){return d},wH:function(){return f},zk:function(){return l}});var r=n(15861),a=n(87757),o=n.n(a),c=n(5464),s=n(74569),i=n.n(s),u=function(e){return function(){var t=(0,r.Z)(o().mark((function t(n){var r,a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.ib}),r={headers:{"Content-Type":"application/json"}},t.next=5,i().post("/api/v1/order/new",e,r);case 5:a=t.sent,s=a.data,n({type:c.mr,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:c.Sr,payload:t.t0.response.data.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},p=function(){return function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:c.A4}),e.next=4,i().get("/api/v1/orders/me");case 4:n=e.sent,r=n.data,t({type:c.SJ,payload:r.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:c.ut,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},l=function(){return function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:c.Ux}),e.next=4,i().get("/api/v1/admin/orders");case 4:n=e.sent,r=n.data,t({type:c.g6,payload:r.orders}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:c.xH,payload:e.t0.response.data.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){return function(){var t=(0,r.Z)(o().mark((function t(n){var r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:c.B6}),t.next=4,i().delete("/api/v1/admin/order/".concat(e));case 4:r=t.sent,a=r.data,n({type:c.Sn,payload:a.success}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:c.gq,payload:t.t0.response.data.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},d=function(){return function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:c.pp});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},33397:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(72791),a=n(38302),o=n(47084),c=n(10968),s=n(55119),i=n(5946),u=n(27463),p=n(12444),l=n(80184),f=function(e){var t=e.activeStep,n=[{label:(0,l.jsx)(a.Z,{children:"Shipping Details"}),icon:(0,l.jsx)(i.Z,{})},{label:(0,l.jsx)(a.Z,{children:"Confirm Order"}),icon:(0,l.jsx)(u.Z,{})},{label:(0,l.jsx)(a.Z,{children:"Payment"}),icon:(0,l.jsx)(p.Z,{})}];return(0,l.jsx)(r.Fragment,{children:(0,l.jsx)(o.Z,{alternativeLabel:!0,activeStep:t,style:{boxSizing:"border-box"},children:n.map((function(e,n){return(0,l.jsx)(c.Z,{active:t===n,completed:t>=n,children:(0,l.jsx)(s.Z,{style:{color:t>=n?"tomato":"rgba(0, 0, 0, 0.649)"},icon:e.icon,children:e.label})},n)}))})})}},74378:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(15861),a=n(87757),o=n.n(a),c=n(72791),s=n(33397),i=n(59434),u=n(98696),p=n(38302),l=n(56534),f=n(65764),d=n(74569),m=n.n(d),y=n(8810),v=n(68190),h=n(82287),b=n(39874),g=n(80184),x=function(e){var t=e.history,n=JSON.parse(sessionStorage.getItem("orderInfo")),a=(0,i.I0)(),d=(0,l.VY)(),x=(0,f.useStripe)(),j=(0,f.useElements)(),E=(0,c.useRef)(null),C=(0,i.v9)((function(e){return e.cart})),O=C.shippingInfo,k=C.cartItems,w=(0,i.v9)((function(e){return e.user})).user,S=(0,i.v9)((function(e){return e.newOrder})).error,P={amount:Math.round(100*n.totalPrice)},Z={shippingInfo:O,orderItems:k,itemsPrice:n.subtotal,taxPrice:n.tax,shippingPrice:n.shippingCharges,totalPrice:n.totalPrice},I=function(){var e=(0,r.Z)(o().mark((function e(n){var r,c,s,i,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),E.current.disabled=!0,e.prev=2,r={headers:{"Content-Type":"application/json"}},e.next=6,m().post("/api/v1/payment/process",P,r);case 6:if(c=e.sent,s=c.data,i=s.client_secret,x&&j){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,x.confirmCardPayment(i,{payment_method:{card:j.getElement(f.CardNumberElement),billing_details:{name:w.name,email:w.email,address:{line1:O.address,city:O.city,state:O.state,postal_code:O.pinCode,country:O.country}}}});case 13:(u=e.sent).error?(E.current.disabled=!1,d.error(u.error.message)):"succeeded"===u.paymentIntent.status?(Z.paymentInfo={id:u.paymentIntent.id,status:u.paymentIntent.status},a((0,b.LV)(Z)),t.push("/success")):d.error("There's some issue while processing payment "),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),E.current.disabled=!1,d.error(e.t0.response.data.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){S&&(d.error(S),a((0,b.b9)()))}),[a,S,d]),(0,g.jsxs)(c.Fragment,{children:[(0,g.jsx)(u.Z,{title:"Payment"}),(0,g.jsx)(s.Z,{activeStep:2}),(0,g.jsx)("div",{className:"paymentContainer",children:(0,g.jsxs)("form",{className:"paymentForm",onSubmit:function(e){return I(e)},children:[(0,g.jsx)(p.Z,{children:"Card Info"}),(0,g.jsxs)("div",{children:[(0,g.jsx)(y.Z,{}),(0,g.jsx)(f.CardNumberElement,{className:"paymentInput"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(v.Z,{}),(0,g.jsx)(f.CardExpiryElement,{className:"paymentInput"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(h.Z,{}),(0,g.jsx)(f.CardCvcElement,{className:"paymentInput"})]}),(0,g.jsx)("input",{type:"submit",value:"Pay - \u20b9".concat(n&&n.totalPrice),ref:E,className:"paymentFormBtn"})]})})]})}},98696:function(e,t,n){"use strict";var r=n(54270),a=n(80184);t.Z=function(e){var t=e.title;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.Z,{children:(0,a.jsx)("title",{children:t})})})}},8810:function(e,t,n){"use strict";var r=n(95318),a=n(20862);t.Z=void 0;var o=a(n(72791)),c=(0,r(n(44894)).default)(o.createElement("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"}),"CreditCard");t.Z=c},68190:function(e,t,n){"use strict";var r=n(95318),a=n(20862);t.Z=void 0;var o=a(n(72791)),c=(0,r(n(44894)).default)(o.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),"Event");t.Z=c},82287:function(e,t,n){"use strict";var r=n(95318),a=n(20862);t.Z=void 0;var o=a(n(72791)),c=(0,r(n(44894)).default)(o.createElement("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"VpnKey");t.Z=c},65764:function(e,t,n){!function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function a(){}function o(){}o.resetWarningCache=a;var c=function(){function e(e,t,n,a,o,c){if(c!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n},s=n((function(e){e.exports=c()}));function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){return d(e)||m(e,t)||y(e,t)||h()}function d(e){if(Array.isArray(e))return e}function m(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){a=!0,o=i}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}function y(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},g=function(e){return null!==e&&"object"===i(e)},x=function(e){return g(e)&&"function"===typeof e.then},j=function(e){return g(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},E="[object Object]",C=function e(t,n){if(!g(t)||!g(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var a=Object.prototype.toString.call(t)===E;if(a!==(Object.prototype.toString.call(n)===E))return!1;if(!a&&!r)return t===n;var o=Object.keys(t),c=Object.keys(n);if(o.length!==c.length)return!1;for(var s={},i=0;i<o.length;i+=1)s[o[i]]=!0;for(var u=0;u<c.length;u+=1)s[c[u]]=!0;var p=Object.keys(s);if(p.length!==o.length)return!1;var l=t,f=n,d=function(t){return e(l[t],f[t])};return p.every(d)},O=function(e,t,n){return g(e)?Object.keys(e).reduce((function(r,a){var o=!g(t)||!C(e[a],t[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),r):o?l(l({},r||{}),{},u({},a,e[a])):r}),null):null},k="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",w=function(e){if(null===e||j(e))return e;throw new Error(k)},S=function(e){if(x(e))return{tag:"async",stripePromise:Promise.resolve(e).then(w)};var t=w(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},P=t.createContext(null);P.displayName="ElementsContext";var Z=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},I=function(e){var n=e.stripe,r=e.options,a=e.children,o=t.useRef(!1),c=t.useRef(!0),s=t.useMemo((function(){return S(n)}),[n]),i=f(t.useState((function(){return{stripe:null,elements:null}})),2),u=i[0],p=i[1],l=b(n);null!==l&&l!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),o.current||("sync"===s.tag&&(o.current=!0,p({stripe:s.stripe,elements:s.stripe.elements(r)})),"async"===s.tag&&(o.current=!0,s.stripePromise.then((function(e){e&&c.current&&p({stripe:e,elements:e.elements(r)})}))));var d=b(r);return t.useEffect((function(){if(u.elements){var e=O(r,d,["clientSecret","fonts"]);e&&u.elements.update(e)}}),[r,d,u.elements]),t.useEffect((function(){return function(){c.current=!1}}),[]),t.useEffect((function(){var e=u.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.2"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.2",url:"https://stripe.com/docs/stripe-js/react"}))}),[u.stripe]),t.createElement(P.Provider,{value:u},a)};I.propTypes={stripe:s.any,options:s.object};var A=function(e){var n=t.useContext(P);return Z(n,e)},T=function(){return A("calls useElements()").elements},N=function(){return A("calls useStripe()").stripe},_=function(e){return(0,e.children)(A("mounts <ElementsConsumer>"))};_.propTypes={children:s.func.isRequired};var R=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},B=function(){},M=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},H=function(e,n){var r="".concat(M(e),"Element"),a=n?function(e){A("mounts <".concat(r,">"));var n=e.id,a=e.className;return t.createElement("div",{id:n,className:a})}:function(n){var a=n.id,o=n.className,c=n.options,s=void 0===c?{}:c,i=n.onBlur,u=void 0===i?B:i,p=n.onFocus,l=void 0===p?B:p,f=n.onReady,d=void 0===f?B:f,m=n.onChange,y=void 0===m?B:m,v=n.onEscape,h=void 0===v?B:v,g=n.onClick,x=void 0===g?B:g,j=A("mounts <".concat(r,">")).elements,E=t.useRef(null),C=t.useRef(null),k=R(d),w=R(u),S=R(l),P=R(x),Z=R(y),I=R(h);t.useLayoutEffect((function(){if(null==E.current&&j&&null!=C.current){var t=j.create(e,s);E.current=t,t.mount(C.current),t.on("ready",(function(){return k(t)})),t.on("change",Z),t.on("blur",w),t.on("focus",S),t.on("escape",I),t.on("click",P)}}));var T=b(s);return t.useEffect((function(){if(E.current){var e=O(s,T,["paymentRequest"]);e&&E.current.update(e)}}),[s,T]),t.useLayoutEffect((function(){return function(){E.current&&E.current.destroy()}}),[]),t.createElement("div",{id:a,className:o,ref:C})};return a.propTypes={id:s.string,className:s.string,onChange:s.func,onBlur:s.func,onFocus:s.func,onReady:s.func,onClick:s.func,options:s.object},a.displayName=r,a.__elementType=e,a},V="undefined"===typeof window,z=H("auBankAccount",V),L=H("card",V),F=H("cardNumber",V),D=H("cardExpiry",V),U=H("cardCvc",V),q=H("fpxBank",V),W=H("iban",V),Y=H("idealBank",V),J=H("p24Bank",V),G=H("epsBank",V),K=H("payment",V),$=H("paymentRequestButton",V),Q=H("linkAuthentication",V),X=H("shippingAddress",V),ee=H("affirmMessage",V),te=H("afterpayClearpayMessage",V);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=z,e.CardCvcElement=U,e.CardElement=L,e.CardExpiryElement=D,e.CardNumberElement=F,e.Elements=I,e.ElementsConsumer=_,e.EpsBankElement=G,e.FpxBankElement=q,e.IbanElement=W,e.IdealBankElement=Y,e.LinkAuthenticationElement=Q,e.P24BankElement=J,e.PaymentElement=K,e.PaymentRequestButtonElement=$,e.ShippingAddressElement=X,e.useElements=T,e.useStripe=N,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(72791))}}]);
//# sourceMappingURL=378.11cd9906.chunk.js.map